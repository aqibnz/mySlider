<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="style.css">
  <title>Document</title>
</head>
<body>
  <div class="main">
    <div class="slider_block">
      <div class="slide" id="slide1">1</div>
      <div class="slide" id="slide2">2</div>
      <div class="slide" id="slide3">3</div>
      <div class="slide" id="slide4">4</div>
      <div class="slide" id="slide5">5</div>
      <div class="slide" id="slide6" style="background: #ffb">6</div>
    </div>
    <div class="btn">
      <span class="prev"><img src="right-arrow.svg" alt=""></span>
      <span class="next"><img src="right-arrow.svg" alt=""></span>
    </div>
    <ul class="pagination">

    </ul>
  </div>

  <script>
  

  var pagination = document.querySelector('.pagination');
  var slider = document.querySelector('.slider_block');
  // pagination
  for (let i = 0; i < slider.children.length; i++) {
    let node = document.createElement("li");
    pagination.appendChild(node);
  }  

    
  var dots = document.querySelectorAll('.pagination li');

  var currentTransform = 0;

  document.querySelector('.next').addEventListener('click' , function(){
    if (currentTransform < (slider.children.length - 1) * 100) {
      currentTransform += 100;
      slider.style.transform = "translateX(-"+currentTransform+"%)";
      console.log(currentTransform);
    }
    else if (currentTransform == (slider.children.length - 1) * 100) {
      slider.style.transform = "";
      currentTransform = 0;
    }
    dots.forEach(d => {d.classList.remove('active')})
    console.log( pagination.children[parseInt(currentTransform === 0 ? 0 : (currentTransform  / 100)) ]);
    pagination.children[parseInt(currentTransform === 0 ? 0 : (currentTransform  / 100)) ].classList.add('active');
  });

  document.querySelector('.prev').addEventListener('click' , ()=>{
    if (currentTransform >= 100) {
      currentTransform -= 100;
    }
    else {
      currentTransform = (slider.children.length -1 ) * 100;
    }
    slider.style.transform = "translateX(-"+currentTransform+"%)";

    dots.forEach(d => {d.classList.remove('active')})
    pagination.children[parseInt(currentTransform === 0 ? 0 : (currentTransform  / 100)) ].classList.add('active')
  });


  dots[0].classList.add('active');
  dots.forEach(function(e , i){ // to add listeners
    e.addEventListener('click' , function(ev){
      dots.forEach(d => { // to clear actives
        d.classList.remove('active')
      })
      ev.target.classList.add('active');
      slider.style.transform = "translateX(-"+100 * i+"%)";
      currentTransform = i * 100;
    });
    console.log(dots[i]);
  });









  // function addClass(){
  //   console.log(dots);
  //   // if (!.classList.contains('active')) {
  //   //   this.classList.add('active');
  //   // }
  // }


  // dots[0].addEventListener("click" , function(){
  //   if (!dots[0].classList.contains('active')) {
  //     this.classList.add('active')
  //   }
  //   else{
  //     this.classList.remove('active');
  //   }
  // });




// touchstart event














    // var slide = document.querySelector('.slider_block');
    // var currentTransform = 0;
    // document.querySelector('.next').addEventListener('click' , function(){
    //     if (currentTransform == (slide.children.length - 1) * 100) {
    //       slide.style.transform ="";
    //       currentTransform = 0;
    //     } 
    //     else if (currentTransform < (slide.children.length - 1) * 100){
    //       currentTransform += 100;
    //       slide.style.transform ="translateX(-" + currentTransform + "%)";
    //     }
    // });
    // document.querySelector('.prev').addEventListener('click' , function(){
    //   if(currentTransform >= 100){ 
    //     currentTransform -= 100;  
    //   } 
    //   else {
    //     currentTransform = (slide.children.length - 1) * 100
    //   }
    //   slide.style.transform ="translateX(-" + currentTransform + "%)";   
    // });
  </script>
</body>
</html>